<html>
  <head>
    <title>OpenSpace Visual Tests - Admin</title>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto" />
    <link rel="stylesheet" type="text/css" href="../style.css" />

    <script src="functions.js"></script>
  </head>
  <body>
    <h1 id="header">OpenSpace Image Testing</h1>
    Admin Token: <input type="password" id="adminToken">

    <ul>
      <li class="grouping">
        <h2>Update Reference</h2>
        <p>
          Updates the reference for a specific test. After submitting this change, the last image for the provided test is going to be used as the reference for future images.
        </p>
        <table>
          <tr>
            <td>Name</td>
            <td><input type="text" id="updateReferenceName" oninput="updateReferenceUi()"></td>
            <td rowspan="3"><img id="updateReferenceImage" src="./transparent.png"></td>
          </tr>
          <tr>
            <td>Group</td>
            <td><input type="text" id="updateReferenceGroup" oninput="updateReferenceUi()"></td>
          </tr>
          <tr>
            <td>Hardware</td>
            <td><input type="text" id="updateReferenceHardware" oninput="updateReferenceUi()"></td>
          </tr>
          <tr>
            <td colspan="2">
              <button type="button" id="updateReferenceButton" onclick="updateReference()" disabled>Submit</button>
            </td>
            <td><div class="error" id="updateReferenceError" onclick="clearElement(this)"></div></td>
          </tr>
        </table>
      </li>
      <li class="grouping">
        <h2>Update Difference Threshold</h2>
        <p>
          Updates the threshold value that is used to calculate difference images. This value must be between 0 and 1. Smaller values make the comparison more sensitive.
        </p>

        Value: <input id="updateThresholdNumber" type="number" min="0" max="1" step="0.001">
        <button type="button" onclick="updateDiffThreshold()">Submit</button>
        <div class="error" id="updateThresholdError" onclick="clearElement(this)"></div>
      </li>
    </ul>
  </body>

  <script>
    window.onload = function() {
      let num = document.getElementById("updateThresholdNumber");
      fetch("/api/diff-threshold").then(res => res.json()).then(res => num.value = res.value);
    };
  </script>
</html>
